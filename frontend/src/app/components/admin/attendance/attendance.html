<div class="admin-attendance-container">
  <h1>Attendance Logs</h1>

  <div class="card filter-card">
    <h2>Filter</h2>

    <div class="filter-grid">
      <div class="form-row">
        <label>From</label>
        <input type="date" [(ngModel)]="filterFrom" />
      </div>

      <div class="form-row">
        <label>To</label>
        <input type="date" [(ngModel)]="filterTo" />
      </div>

      <div class="form-row">
        <label>Employee ID</label>
        <input
          type="text"
          [(ngModel)]="filterEmployeeId"
          placeholder="EMP-123"
        />
      </div>
    </div>

    <div class="actions">
      <button class="btn" (click)="onApplyFilter()">Apply</button>
      <button class="btn secondary" (click)="onClearFilter()">Clear</button>
    </div>
  </div>

  <div class="card table-card">
    <h2>Results</h2>

    <p class="error" *ngIf="error">{{ error }}</p>

    <div *ngIf="loading">Loading attendance logs...</div>

    <table *ngIf="!loading && records.length" class="attendance-table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Employee</th>
          <th>Check-In</th>
          <th>Check-Out</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let r of records">
          <td>{{ r.date | date: 'mediumDate' }}</td>
          <td>
            {{ r.employee?.employeeId }}<br />
            {{ r.employee?.firstName }} {{ r.employee?.lastName }}<br />
            <small>{{ r.employee?.email }}</small>
          </td>
          <td>{{ r.checkIn ? (r.checkIn | date: 'shortTime') : '-' }}</td>
          <td>{{ r.checkOut ? (r.checkOut | date: 'shortTime') : '-' }}</td>
          <td>
            <span
              class="status-pill"
              [class.present]="(r.status || 'Present') !== 'Absent'"
              [class.absent]="(r.status || 'Present') === 'Absent'"
            >
              {{ r.status || 'Present' }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="!loading && !records.length">
      <p>No attendance logs found for the selected filters.</p>
    </div>
  </div>
</div>
